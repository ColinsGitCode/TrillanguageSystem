# Trilingual Records 全面功能与 UI 测试方案（含样例）

**更新日期**: 2026-02-05
**范围版本**: 当前主分支（Local LLM Only）

---

## 1. 测试目标
- 验证核心流程：文本输入 / OCR 输入 -> 生成学习卡片 -> 文件夹管理 -> 卡片展示与删除。
- 验证 UI/UX：布局、列表展示、弹窗、自动刷新、Mission Control 指标展示。
- 验证 API 与数据一致性：文件系统与数据库同步、统计大盘准确性。
- 验证容错与稳定性：异常输入、OCR 失败、LLM 超时等场景。

## 2. 范围与不在范围
**在范围**
- 本地 LLM 生成（Gemini 已封存）
- OCR 输入（PNG/JPEG/WebP）
- 文件夹 + Phrase List + 弹窗
- 删除逻辑（文件 + DB + 音频）
- Mission Control 统计大盘

**不在范围**
- 线上部署、权限认证
- Gemini API 费用与限额测试

## 3. 环境与前置条件
- Node.js 20+
- Docker Compose 运行所有服务
- Local LLM 服务可用
- 文件存储：容器内 volume
- 浏览器：Chrome (推荐)

**检查命令**
```bash
curl -s http://localhost:3010/api/health | jq
curl -s http://localhost:3010/api/statistics | jq
```

## 4. 入口/退出准则
**入口**
- 容器运行正常，/api/health 返回 OK
- 首页可加载，无控制台错误

**退出**
- 核心流程用例全部通过
- 关键 UI 用例通过
- 关键 API 用例通过

## 5. 测试策略
### 5.1 功能测试
- 文本生成 / OCR 生成
- 文件夹与卡片列表显示
- 弹窗内容与指标
- 删除卡片与清理文件

### 5.2 UI/UX 测试
- 生成区域 / 文件夹区域布局
- Phrase List 多列卡片布局
- 弹窗样式与交互
- 自动刷新机制

### 5.3 API 与数据一致性
- /api/generate 生成记录
- /api/history 与 /api/folders 一致
- /api/statistics 与实际记录一致

### 5.4 稳定性与容错
- 输入空文本
- OCR 上传无效图片
- LLM 超时/异常
- 大量卡片列表渲染

---

## 6. 样例测试数据
### 6.1 文本输入样例
1) 简短：`今天的天气很好。`
2) 中等：`如果可以的话，周末一起去喝咖啡吧。`
3) 混合：`Please check the schedule on 2/5 and confirm.`

### 6.2 OCR 图片样例
- PNG 截图（含中/日/英混排）
- JPEG 扫描文档
- WebP 截图（Chrome 复制粘贴）

**生成测试图建议**
- 使用 HTML Canvas 或任意截图工具生成 800x400 图片，包含三语文本。

---

## 7. 详细测试用例（样例）

### 功能类
**F-01 文本生成学习卡片**
- 步骤：输入短句 -> 点击 Generate
- 预期：生成卡片、自动刷新列表、弹窗内容正确

**F-02 OCR 生成学习卡片**
- 步骤：上传/粘贴 OCR 图片 -> 识别文字 -> 生成
- 预期：OCR 结果正确，生成成功

**F-03 文件夹列表与卡片展示**
- 步骤：选择日期文件夹
- 预期：Phrase List 显示该日期卡片

**F-04 点击卡片弹窗**
- 步骤：点击卡片
- 预期：弹窗显示卡片内容 / Mission 指标

**F-05 删除卡片**
- 步骤：弹窗点击删除
- 预期：卡片消失；文件与 DB 同步删除

**F-06 自动刷新**
- 步骤：生成卡片后观察列表
- 预期：无需手动刷新，列表自动更新

### UI/UX 类
**UI-01 列表多列布局**
- 预期：卡片在一行尽可能多显示，宽度自适应

**UI-02 卡片视觉轮廓**
- 预期：轮廓清晰、有层次

**UI-03 弹窗删除按钮位置**
- 预期：左上角显示删除按钮

### API/数据一致性
**API-01 /api/history 与 /api/folders 一致**
- 预期：文件夹中的文件数量与历史记录一致

**API-02 /api/statistics**
- 预期：总数、趋势与实际生成数量一致

---

## 8. UI 测试执行样例（Chrome DevTools）
1. 打开主页面 `http://localhost:3010/`
2. 打开 DevTools -> Console/Network
3. 执行 F-01 / F-02
4. 检查 Console 是否报错
5. Network 验证 `/api/generate` / `/api/ocr`
6. 观察 UI 自动刷新
7. 截图保存关键页面

---

## 9. 测试报告模板（执行后填写）
```
测试日期:
测试版本:
通过率:

失败用例:
- 用例ID:
- 现象:
- 日志/截图:

备注:
```

---

**结论**：以上为可直接执行的全面测试方案与样例。可按需求扩展为自动化脚本测试。

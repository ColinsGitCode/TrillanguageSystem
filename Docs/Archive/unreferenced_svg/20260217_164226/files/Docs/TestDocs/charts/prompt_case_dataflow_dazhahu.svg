<svg xmlns="http://www.w3.org/2000/svg" width="1680" height="980" style="background-color: rgb(255, 255, 255);"><defs><marker id="arrow" viewBox="0 -5 10 10" refX="8" refY="0" markerWidth="7" markerHeight="7" orient="auto"><path d="M0,-5L10,0L0,5" fill="#475569"></path></marker><filter id="softShadow" x="-20%" y="-20%" width="160%" height="160%"><feDropShadow dx="0" dy="2" stdDeviation="2.2" flood-color="#0f172a" flood-opacity="0.12"></feDropShadow></filter></defs><text x="40" y="42" font-size="30" font-weight="800" fill="#0f172a">案例数据流图: "打招呼"</text><text x="40" y="70" font-size="15" font-weight="500" fill="#64748b">experiment=exp_benchmark_50_20260209_140431 | round: baseline vs fewshot_r1</text><rect x="36" y="95" width="1608" height="390" rx="16" fill="#f8fafc" stroke="#cbd5e1" stroke-dasharray="6,6"></rect><text x="54" y="126" font-size="18" font-weight="800" fill="#0f172a">共享输入阶段</text><g><rect x="70" y="160" width="280" height="100" rx="12" fill="#eef2ff" stroke="#4f46e5" stroke-width="2" filter="url(#softShadow)"></rect><text x="84" y="184" font-size="14" font-weight="600" fill="#1f2937"><tspan x="84" dy="0">请求: POST /api/generate</tspan><tspan x="84" dy="18">phrase = 打招呼</tspan><tspan x="84" dy="18">provider = local</tspan></text></g><g><rect x="400" y="160" width="290" height="100" rx="12" fill="#e0f2fe" stroke="#0284c7" stroke-width="2" filter="url(#softShadow)"></rect><text x="414" y="184" font-size="14" font-weight="600" fill="#1f2937"><tspan x="414" dy="0">V1+V2 基础 Prompt</tspan><tspan x="414" dy="18">basePromptTokens = 274</tspan><tspan x="414" dy="18">buildPrompt/buildMarkdownPrompt</tspan></text></g><g><rect x="740" y="160" width="320" height="112" rx="12" fill="#dcfce7" stroke="#16a34a" stroke-width="2" filter="url(#softShadow)"></rect><text x="754" y="184" font-size="14" font-weight="600" fill="#1f2937"><tspan x="754" dy="0">V3 示例检索</tspan><tspan x="754" dy="18">countUsed = 1</tspan><tspan x="754" dy="18">exampleIds = [27]</tspan></text></g><g><rect x="1110" y="160" width="320" height="112" rx="12" fill="#fef3c7" stroke="#d97706" stroke-width="2" filter="url(#softShadow)"></rect><text x="1124" y="184" font-size="14" font-weight="600" fill="#1f2937"><tspan x="1124" dy="0">预算门控</tspan><tspan x="1124" dy="18">fallback = budget_reduction</tspan><tspan x="1124" dy="18">fewshotPromptTokens = 258</tspan></text></g><line x1="350" y1="210" x2="400" y2="210" stroke="#475569" stroke-width="1.8" marker-end="url(#arrow)"></line><text x="375" y="204" text-anchor="middle" font-size="12" font-weight="600" fill="#334155">输入短语</text><line x1="690" y1="210" x2="740" y2="210" stroke="#475569" stroke-width="1.8" marker-end="url(#arrow)"></line><text x="715" y="204" text-anchor="middle" font-size="12" font-weight="600" fill="#334155">启用 few-shot</text><line x1="1060" y1="216" x2="1110" y2="216" stroke="#475569" stroke-width="1.8" marker-end="url(#arrow)"></line><text x="1085" y="210" text-anchor="middle" font-size="12" font-weight="600" fill="#334155">预算检查</text><rect x="36" y="510" width="780" height="410" rx="16" fill="#f0f9ff" stroke="#38bdf8" stroke-dasharray="5,5"></rect><text x="54" y="540" font-size="18" font-weight="800" fill="#0f172a">Baseline 路径（无 few-shot）</text><g><rect x="70" y="580" width="320" height="120" rx="12" fill="#e0f2fe" stroke="#0284c7" stroke-width="2" filter="url(#softShadow)"></rect><text x="84" y="604" font-size="14" font-weight="600" fill="#1f2937"><tspan x="84" dy="0">Prompt 提交</tspan><tspan x="84" dy="18">totalPromptTokensEst = 274</tspan><tspan x="84" dy="18">fewShotEnabled = false</tspan></text></g><g><rect x="430" y="580" width="340" height="168" rx="12" fill="#ffffff" stroke="#0284c7" stroke-width="2" filter="url(#softShadow)"></rect><text x="444" y="604" font-size="16" font-weight="600" fill="#1f2937"><tspan x="444" dy="0">模型输出指标</tspan><tspan x="444" dy="26">quality = 64</tspan><tspan x="444" dy="26">tokens = 870</tspan><tspan x="444" dy="26">latency = 27552 ms</tspan></text></g><line x1="390" y1="640" x2="430" y2="640" stroke="#475569" stroke-width="1.8" marker-end="url(#arrow)"></line><text x="410" y="634" text-anchor="middle" font-size="12" font-weight="600" fill="#334155">直接生成</text><rect x="842" y="510" width="802" height="410" rx="16" fill="#f0fdf4" stroke="#22c55e" stroke-dasharray="5,5"></rect><text x="860" y="540" font-size="18" font-weight="800" fill="#0f172a">Few-shot 路径（动态注入后）</text><g><rect x="870" y="580" width="340" height="120" rx="12" fill="#dcfce7" stroke="#16a34a" stroke-width="2" filter="url(#softShadow)"></rect><text x="884" y="604" font-size="14" font-weight="600" fill="#1f2937"><tspan x="884" dy="0">增强 Prompt 提交</tspan><tspan x="884" dy="18">totalPromptTokensEst = 532</tspan><tspan x="884" dy="18">fewShotEnabled = true</tspan></text></g><g><rect x="1244" y="580" width="360" height="168" rx="12" fill="#ffffff" stroke="#16a34a" stroke-width="2" filter="url(#softShadow)"></rect><text x="1258" y="604" font-size="16" font-weight="600" fill="#1f2937"><tspan x="1258" dy="0">模型输出指标</tspan><tspan x="1258" dy="26">quality = 73</tspan><tspan x="1258" dy="26">tokens = 1291</tspan><tspan x="1258" dy="26">latency = 34387 ms</tspan></text></g><line x1="1210" y1="640" x2="1244" y2="640" stroke="#475569" stroke-width="1.8" marker-end="url(#arrow)"></line><text x="1227" y="634" text-anchor="middle" font-size="12" font-weight="600" fill="#334155">注入示例后生成</text><g><rect x="1000" y="774" width="520" height="118" rx="12" fill="#ecfeff" stroke="#0891b2" stroke-width="2" filter="url(#softShadow)"></rect><text x="1014" y="798" font-size="15" font-weight="600" fill="#1f2937"><tspan x="1014" dy="0">对照结论: quality +9 | tokens +421 | latency +6835ms</tspan><tspan x="1014" dy="22">机制生效特征: 注入 1 条示例 + budget_reduction 触发</tspan><tspan x="1014" dy="22">说明质量提升来自 V3 注入路径，而非仅模板变更</tspan></text></g><text x="40" y="958" font-size="12" fill="#64748b">Source: baseline.jsonl + fewshot_r1.jsonl (phrase=打招呼)</text></svg>
<!doctype html>
<html lang="zh-Hans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trilingual Records Viewer</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <!-- Noto Serif for Academic Style -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Serif:wght@400;700&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="modern-card.css" />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.9/dist/purify.min.js"></script>
  </head>
  <body>
    <div class="page">
      <header class="hero">
        <div>
          <p class="eyebrow">Trilingual Records</p>
<!--          <h1>HTML 记录浏览面板</h1>-->
<!--          <p class="lede">左上选择文件夹，右侧查看 HTML 清单，点击文件后会以大尺寸弹窗显示内容。</p>-->
        </div>
<!--        <div class="pill" id="sourceHint">数据源通过服务端环境变量配置</div>-->
      </header>

      <section class="grid">
        <article class="card folders" aria-label="Folders">
          <!-- Generation Panel -->
          <div class="gen-panel">
            <p class="label">New Card</p>

            <div class="input-modes">
              <!-- 文本输入 -->
              <div class="input-mode">
                <div class="mode-header">
                  <span class="mode-icon">📝</span>
                  <span>文本输入</span>
                </div>
                <textarea id="phraseInput" placeholder="输入短语或句子..."></textarea>
                <button id="genBtn" class="btn-primary">Generate</button>
              </div>

              <!-- 图片识别 -->
              <div class="input-mode">
                <div class="mode-header">
                  <span class="mode-icon">🖼️</span>
                  <span>图片识别</span>
                </div>
                <div id="imageDropZone" class="image-drop-zone">
                  <div class="drop-hint">Ctrl+V 粘贴或拖拽图片</div>
                  <img id="imagePreview" class="hidden" alt="预览" />
                </div>
                <div class="image-actions">
                  <button id="ocrBtn" class="btn-secondary" disabled>识别文字</button>
                  <button id="clearImageBtn" class="btn-text" disabled>清除</button>
                </div>
              </div>
            </div>

            <!-- 进度指示器 -->
            <div id="progressBar" class="progress-bar hidden">
              <div class="progress-header">
                <div class="progress-prompt">
                  <span class="prompt-label">Prompt:</span>
                  <span id="promptText" class="prompt-text"></span>
                </div>
                <div id="progressTimer" class="progress-timer">00:00</div>
              </div>
              <div class="progress-steps">
                <div class="step" data-step="ocr">
                  <div class="step-dot"></div>
                  <div class="step-label">识别文字</div>
                </div>
                <div class="step-line"></div>
                <div class="step" data-step="generate">
                  <div class="step-dot"></div>
                  <div class="step-label">生成内容</div>
                </div>
                <div class="step-line"></div>
                <div class="step" data-step="save">
                  <div class="step-dot"></div>
                  <div class="step-label">保存文件</div>
                </div>
                <div class="step-line"></div>
                <div class="step" data-step="audio">
                  <div class="step-dot"></div>
                  <div class="step-label">生成音频</div>
                </div>
              </div>
              <p id="progressStatus" class="progress-status"></p>
            </div>
          </div>

          <div class="card-header">
            <div>
              <p class="label">Path</p>
              <h2>Date</h2>
            </div>
            <div class="chip" id="folderCount">0</div>
          </div>
          <div class="list" id="folderList" role="listbox" aria-label="folder list"></div>
        </article>

        <article class="card viewer" aria-label="Viewer">
<!--          <div class="card-header">-->
<!--            <div>-->
<!--              <p class="label">右侧区域</p>-->
<!--              <h2>HTML 清单与预览弹窗</h2>-->
<!--            </div>-->
<!--          </div>-->
          <div class="file-panel">
            <div class="card-header sub">
              <div>
                <p class="label">FileName</p>
                <h3>Phrase List</h3>
                <p class="muted small">Click to Browse</p>
              </div>
              <div class="chip" id="fileCount">0</div>
            </div>
            <div class="list file-list" id="fileList" role="listbox" aria-label="file list"></div>
          </div>
          <div class="viewer-note">
<!--            <p>选中文件后，内容会在全屏弹窗中展示。点击弹窗外即可关闭。</p>-->
          </div>
        </article>
      </section>

      <div id="modalOverlay" class="modal hidden" aria-modal="true" role="dialog">
        <div class="modal-content" id="modalContainer">
            <!-- Content injected via JS -->
        </div>
      </div>
    </div>
    <script src="main.js" defer></script>
  </body>
</html>
